# Snapshot report for `src/tests/generators/calculation/Calculation.spec.ts`

The actual snapshot is saved in `Calculation.spec.ts.snap`.

Generated by [AVA](https://avajs.dev).

## parse calculation

> Snapshot 1

    `␊
    /* eslint-disable */␊
    // THIS FILE WAS GENERATED␊
    // ALL CHANGES WILL BE OVERWRITTEN␊
    ␊
    // ARCHITECTURE START␊
      type FetchResponse<T> = {␊
        json: T;␊
        status: number;␊
      };␊
      ␊
      type Configuration = {␊
        jwtKey: string | undefined;␊
        onResponse?: (response: FetchResponse<any>) => void;␊
      };␊
      ␊
      let CONFIG: Configuration = {␊
        jwtKey: undefined,␊
        onResponse: () => {},␊
      };␊
      ␊
      export function configureApiCalls(configuration: Configuration) {␊
        CONFIG = { ...CONFIG, ...configuration };␊
      }␊
      ␊
      async function fetchJson<T>(...args: any): Promise<FetchResponse<T>> {␊
        const errorResponse = (status: number) => {␊
          const errorResponse = { status: status, json: null as any };␊
          CONFIG.onResponse && CONFIG.onResponse(errorResponse);␊
          return errorResponse;␊
        }␊
    ␊
        try {␊
          const res: Response = await (fetch as any)(...args);␊
          try {␊
            const json = await res.json();␊
            const response = { json: json, status: res.status };␊
            CONFIG.onResponse && CONFIG.onResponse(response);␊
            return response;␊
          }␊
          catch {␊
            return errorResponse(res.status)␊
          }␊
        } catch {␊
          return errorResponse(503);␊
        }␊
      }␊
      ␊
      const updateHeaders = (headers: Headers) => {␊
        if (!headers.has("Content-Type")) {␊
          headers.append("Content-Type", "application/json");␊
        }␊
        const token = CONFIG.jwtKey␊
          ? localStorage.getItem(CONFIG.jwtKey as any)␊
          : undefined;␊
        if (!headers.has("Authorization") && token) {␊
          headers.append("Authorization", token);␊
        }␊
      };␊
    ␊
    function apiPost<TResponse, TRequest>(␊
      url: string,␊
      request: TRequest,␊
      headers: Headers␊
    ) {␊
      var raw = JSON.stringify(request);␊
      updateHeaders(headers);␊
      var requestOptions = {␊
        method: "POST",␊
        headers,␊
        body: raw,␊
        redirect: "follow",␊
      };␊
    ␊
      return fetchJson<TResponse>(url, requestOptions as any);␊
    }␊
    ␊
    type ParamsObject = {␊
      [key: string]: any;␊
    };␊
    ␊
    function apiGet<TResponse>(␊
      url: string,␊
      headers: Headers,␊
      paramsObject: ParamsObject = {}␊
    ) {␊
      updateHeaders(headers);␊
      const queryString = Object.entries(paramsObject)␊
        .filter(([_, val]) => val !== undefined && val !== null)␊
        .map(([key, val]) => \`${key}=${val}\`)␊
        .join("&");␊
      const maybeQueryString = queryString.length > 0 ? \`?${queryString}\` : "";␊
      const requestOptions = {␊
        method: "GET",␊
        headers,␊
        redirect: "follow",␊
      };␊
      return fetchJson<TResponse>(\`${url}${maybeQueryString}\`, requestOptions);␊
    }␊
    ␊
    function apiPut<TResponse, TRequest>(␊
      url: string,␊
      request: TRequest,␊
      headers: Headers␊
    ) {␊
      updateHeaders(headers);␊
    ␊
      var raw = JSON.stringify(request);␊
    ␊
      var requestOptions = {␊
        method: "PUT",␊
        headers,␊
        body: raw,␊
        redirect: "follow",␊
      };␊
    ␊
      return fetchJson<TResponse>(url, requestOptions as any);␊
    }␊
    ␊
    function apiDelete<TResponse>(␊
      url: string,␊
      headers: Headers,␊
      paramsObject: ParamsObject = {}␊
    ) {␊
      updateHeaders(headers);␊
      const queryString = Object.entries(paramsObject)␊
        .filter(([_, val]) => val !== undefined && val !== null)␊
        .map(([key, val]) => \`${key}=${val}\`)␊
        .join("&");␊
      const maybeQueryString = queryString.length > 0 ? \`?${queryString}\` : "";␊
    ␊
      var requestOptions = {␊
        method: "DELETE",␊
        headers,␊
        redirect: "follow",␊
      };␊
      return fetchJson<TResponse>(\`${url}${maybeQueryString}\`, requestOptions);␊
    }␊
    ␊
    function apiPatch<TResponse, TRequest>(␊
      url: string,␊
      request: TRequest,␊
      headers: Headers␊
    ) {␊
      updateHeaders(headers);␊
    ␊
      var raw = JSON.stringify(request);␊
    ␊
      var requestOptions = {␊
        method: "PATCH",␊
        headers,␊
        body: raw,␊
        redirect: "follow",␊
      };␊
    ␊
      return fetchJson<TResponse>(url, requestOptions as any);␊
    }␊
    // ARCHITECTURE END␊
    ␊
    export const API_ROUTES = { ␊
    	getCalculationId: "/api/Calculation",␊
    	deleteCalculationId: "/api/Calculation"␊
    }␊
    ␊
    export interface CalculationDto {␊
    	calculationID: number;␊
    	calculationTypeCode?: string | null;␊
    	name?: string | null;␊
    	description?: string | null;␊
    	isActive: boolean;␊
    	dateCreated: string;␊
    	dateUpdated?: string | null;␊
    	createdBy: number;␊
    	updatedBy?: number | null;␊
    	enterpriseID: number;␊
    	calculationVersions?: CalculationVersionListItemDto[] | null;␊
    }␊
    ␊
    export interface CalculationVersionListItemDto {␊
    	calculationVersionID: number;␊
    	isDeleted: boolean;␊
    	calculationID: number;␊
    	calculationStatusCode?: string | null;␊
    	revisionFrom: string;␊
    	revisionTo?: string | null;␊
    }␊
    ␊
    export interface EntityResult {␊
    	primaryID?: number | null;␊
    	primaryCode?: string | null;␊
    	isValid: boolean;␊
    }␊
    ␊
    export interface ProblemDetails {␊
    	type?: string | null;␊
    	title?: string | null;␊
    	status?: number | null;␊
    	detail?: string | null;␊
    	instance?: string | null;␊
    }␊
    ␊
    const API_URL = "baseUrl";␊
    ␊
    export const getCalculationId = (id: number, headers = new Headers()): ␊
    	Promise<FetchResponse<CalculationDto>> => {␊
    	return apiGet(\`${API_URL}/api/Calculation/${id}\`, headers, {});␊
    }␊
    ␊
    export const deleteCalculationId = (id: number, headers = new Headers()): ␊
    	Promise<FetchResponse<EntityResult>> => {␊
    	return apiDelete(\`${API_URL}/api/Calculation/${id}\`, headers, {});␊
    }␊
    ␊
    export const API = { ␊
    	getCalculationId,␊
    	deleteCalculationId␊
    }␊
    ␊
    `

## Angular parse calculation

> Snapshot 1

    `␊
    /* eslint-disable */␊
    // THIS FILE WAS GENERATED␊
    // ALL CHANGES WILL BE OVERWRITTEN␊
    ␊
    // ARCHITECTURE START␊
    ␊
      import { mergeMap, catchError } from 'rxjs/operators';␊
      import { Observable, throwError as _observableThrow, of as _observableOf } from 'rxjs';␊
      import { Injectable, Inject, Optional, InjectionToken } from '@angular/core';␊
      import { HttpClient, HttpHeaders, HttpResponse, HttpResponseBase, HttpContext } from '@angular/common/http';␊
    ␊
      function createQueryUrl<K extends object>(url: string, paramsObject: K) {␊
        const queryString = Object.entries(paramsObject)␊
          .map(([key, val]) => \`${key}=${val}\`)␊
          .join("&");␊
        const maybeQueryString = queryString.length > 0 ? \`?${queryString}\` : "";␊
        return \`${url}${maybeQueryString}\`;␊
    }␊
    ␊
      function apiGet<T, U extends object = object>(␊
        httpClient: HttpClient,␊
        url: string,␊
        params?: U,␊
      ): Observable<T | never> {␊
        const queryUrl = !!params ? createQueryUrl<U>(url, params) : url;␊
        return httpClient.get<T>(queryUrl);␊
      }␊
      ␊
      function apiPost<T, U = unknown>(␊
        httpClient: HttpClient,␊
        url: string,␊
        body: U,␊
        headers?: HttpHeaders,␊
      ): Observable<T | never> {␊
        return httpClient.post<T>(url, body, {␊
          headers: headers,␊
        });␊
      }␊
      ␊
      function apiPut<T, U = unknown>(␊
        httpClient: HttpClient,␊
        url: string,␊
        body: U,␊
        headers?: HttpHeaders,␊
      ): Observable<T | never> {␊
        return httpClient.put<T>(url, body, {␊
          headers: headers,␊
        });␊
      }␊
    ␊
      function apiDelete<T, U extends object = object>(httpClient: HttpClient, url: string, params?: U) {␊
        const queryUrl = !!params ? createQueryUrl<U>(url, params) : url;␊
        return httpClient.delete<T>(queryUrl);␊
      }␊
    ␊
      function apiPatch<T, U = unknown>(␊
        httpClient: HttpClient,␊
        url: string,␊
        body: U,␊
        headers?: HttpHeaders,␊
      ): Observable<T | never> {␊
        return httpClient.patch<T>(url, body, {␊
          headers: headers,␊
        });␊
      }␊
    ␊
      // ARCHITECTURE END␊
      ␊
    export const API_ROUTES = { ␊
    	getCalculationId: "/api/Calculation",␊
    	deleteCalculationId: "/api/Calculation"␊
    }␊
    ␊
    export interface CalculationDto {␊
    	calculationID: number;␊
    	calculationTypeCode?: string | null;␊
    	name?: string | null;␊
    	description?: string | null;␊
    	isActive: boolean;␊
    	dateCreated: string;␊
    	dateUpdated?: string | null;␊
    	createdBy: number;␊
    	updatedBy?: number | null;␊
    	enterpriseID: number;␊
    	calculationVersions?: CalculationVersionListItemDto[] | null;␊
    }␊
    ␊
    export interface CalculationVersionListItemDto {␊
    	calculationVersionID: number;␊
    	isDeleted: boolean;␊
    	calculationID: number;␊
    	calculationStatusCode?: string | null;␊
    	revisionFrom: string;␊
    	revisionTo?: string | null;␊
    }␊
    ␊
    export interface EntityResult {␊
    	primaryID?: number | null;␊
    	primaryCode?: string | null;␊
    	isValid: boolean;␊
    }␊
    ␊
    export interface ProblemDetails {␊
    	type?: string | null;␊
    	title?: string | null;␊
    	status?: number | null;␊
    	detail?: string | null;␊
    	instance?: string | null;␊
    }␊
    ␊
    ␊
    ␊
    export const API_BASE_URL = new InjectionToken<string>('API_BASE_URL');␊
    ␊
    @Injectable()␊
    export class ApiService {␊
      private httpClient: HttpClient;␊
      private baseUrl: string;␊
    ␊
      constructor(␊
        @Inject(HttpClient) httpClient: HttpClient,␊
        @Optional() @Inject(API_BASE_URL) baseUrl?: string␊
      ) {␊
          this.httpClient = httpClient;␊
          this.baseUrl = baseUrl ?? "";␊
      }␊
    ␊
      ␊
    	getCalculationId(id: number): Observable<CalculationDto> {␊
          ␊
          return apiGet<CalculationDto>(this.httpClient, \`${this.baseUrl}/api/Calculation/${id}\`);␊
        }␊
    deleteCalculationId(id: number): Observable<EntityResult> {␊
          ␊
          return apiDelete<EntityResult>(this.httpClient, \`${this.baseUrl}/api/Calculation/${id}\`);␊
        }␊
    ␊
    ␊
    }␊
      ␊
      ␊
    ␊
    `
